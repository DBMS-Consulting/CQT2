<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns:jsp="http://java.sun.com/JSP/Page"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
				xmlns:c="http://java.sun.com/jsp/jstl/core" template="../CSMQ.xhtml">

	<ui:define name="page-content">
		<h:form id="f1">

			<!-- Extension for search purposes -->
			<h:panelGrid columns="2" style="width: 100% !important">
				<p:breadCrumb styleClass="breadcrumb">
					<p:menuitem value="Home" url="/index.xhtml" />
					<p:menuitem value="Administrator" />
				</p:breadCrumb>
			</h:panelGrid>

			<p:tabView id="pb1">
				<p:tab title="Create Codelist">

					<p:outputPanel style="text-align:center;" id="codelistForm">
						<h:panelGrid columns="2" columnClasses="label, value">

							<p:outputLabel value="Serial Number" styleClass="label-right" />
							<p:spinner style="float: left"
									   required="true" label="Serial #"
									   value="#{adminController.newCodelist.serialNum}" min="1">
								<p:ajax update="defaultFlagCode activeFlagCode" />
							</p:spinner>

							<p:outputLabel value="Codelist Name" styleClass="label-right" />
							<p:inputText label="Codelist name" maxlength="30" required="true"
										 value="#{adminController.newCodelist.codelistConfigType}"
										 style="width: 300px !important;  float: left" />

							<p:outputLabel value="Codelist Value" styleClass="label-right" />
							<p:inputText label="Codelist Value" required="true"
										 value="#{adminController.newCodelist.value}" maxlength="40"
										 style="width: 300px !important; float: left" />

							<p:outputLabel value="Codelist Internal Value" styleClass="label-right" />
							<p:inputText label="Code Internal Value" maxlength="4" required="true"
										 value="#{adminController.newCodelist.codelistInternalValue}"
										 style="width: 100px !important; float: left" />

							<p:outputLabel value="Default flag" styleClass="label-right" />
							<p:selectOneMenu value="#{adminController.newCodelist.defaultFlag}" disabled="#{adminController.newCodelist.serialNum == 1}"
											 style="float: left" id="defaultFlagCode">
								<f:selectItem itemValue="Y" itemLabel="Y" />
								<f:selectItem itemValue="N" itemLabel="N" />
							</p:selectOneMenu>

							<p:outputLabel value="Active flag" styleClass="label-right" />
							<p:selectOneMenu value="#{adminController.newCodelist.activeFlag}" disabled="#{adminController.newCodelist.serialNum == 1}"
											 style="float: left" id="activeFlagCode">
								<f:selectItem itemValue="Y" itemLabel="Y" />
								<f:selectItem itemValue="N" itemLabel="N" />
							</p:selectOneMenu>
						</h:panelGrid>

						<h:panelGrid columns="2" cellpadding="5">
							<p:commandButton value="Save" icon="fa fa-plus">
								<p:ajax process="codelistForm" update="codelistForm msgAdmin codelistSelect" listener="#{adminController.addCodelist}" />
							</p:commandButton>
							<p:commandButton value="Cancel" icon="fa fa-close">

								<p:ajax process="codelistForm" update="codelistForm msgAdmin" listener="#{adminController.cancelCodelist}" />
							</p:commandButton>



							<!-- <p:commandButton value="Cancel" icon="fa fa-close" immediate="true"
											 update="codelistForm msgAdmin"
											 actionListener="#{adminController.cancelCodelist}"  /> -->
						</h:panelGrid>
					</p:outputPanel>
				</p:tab>
				<p:tab title="Update Codelist">
					<h:panelGrid columns="2">
						<p:outputLabel value="Codelist Type" />
						<!--<p:selectOneMenu label="Codelist Type" value="#{adminController.codelist}" id="codelistSelect">
							<f:selectItem itemValue="" itemLabel="" />
							<f:selectItems value="#{configMB.codelistTypes}" var="cl"
										   itemLabel="#{cl.codelistConfigType}" itemValue="#{cl.codelistConfigType}" />


							<p:ajax update="adminPanel" oncomplete="PF('tblAdmins').filter()" event="change" listener="#{adminController.switchCodelist}" />
						</p:selectOneMenu>-->

						<p:selectOneMenu filterMatchMode="contains" id="codelistSelect" value="#{adminController.codelist}" filter="true">
							<f:selectItem itemValue="" itemLabel="" noSelectionOption="true" />
							<f:selectItems value="#{configMB.codelistTypes}" var="cl"
										   itemLabel="#{cl.codelistConfigType}" itemValue="#{cl.codelistConfigType}" />

							<p:ajax update="adminPanel" oncomplete="PF('tblAdmins').filter()" event="change" listener="#{adminController.switchCodelist}" />
						</p:selectOneMenu>
					</h:panelGrid>
					<p:spacer height="10" />

					<ui:fragment id="table" rendered="true">
						<ui:include src="adminTable.xhtml"></ui:include>
					</ui:fragment>
				</p:tab>

				<p:tab title="Mappings" disabled="true">
					<p:panel style=" padding:5px;">
						<h3 style="text-align: center"></h3>
						<p:spacer height="10" />
					</p:panel>
				</p:tab>
			</p:tabView>
		</h:form>

		<style>
			.label-right {
				float: right;
				margin-right: 20px;
				font-size: 14px !important;
			}
			.ui-state-error
			.ui-inputfield, .ui-widget-content .ui-inputfield, .ui-widget-header .ui-inputfield {
				background: #ffffff !important;
				-moz-box-shadow: inset 0 2px 2px #8f8f8f;
				-webkit-box-shadow: inset 0 2px 2px #8f8f8f;
				box-shadow: inset 0 2px 2px #8f8f8f;
				color: #222222;
				filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
			}

		</style>
	</ui:define>
</ui:composition>