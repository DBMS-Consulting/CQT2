<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	
	
	<p:remoteCommand name="saveDetailsAndGoToNextStep"
		update="@form:m1 @form:wizardId @form:codeValue"
		actionListener="#{createController.saveDetailsAndNextStep}"
		onstart="PF('confirmSaveDetailsDlg').hide()"
		oncomplete="notifySearchControllerDataChange()" />
	<p:remoteCommand name="resetDetailsAndGoToNextStep"
		update="@form:wizardId @form:detailsPanel"
		actionListener="#{createController.cancelDetailsAndNextStep}"
		onstart="PF('confirmSaveDetailsDlg').hide()" />

	<!-- <p:growl id="messages" /> -->
	<h:panelGrid columns="3" cellpadding="5" id="detailsPanel" styleClass="full-width">

		<h:panelGrid columns="2" columnClasses="label, value">
			<p:outputLabel value="* Extension" styleClass="label-right" />
			<p:selectOneMenu
				value="#{createController.detailsFormModel.extension}"
				disabled="#{createController.readOnlyState}"
				required="#{!createController.readOnlyState}"
				requiredMessage="The extension is required">
				<f:selectItems value="#{configMB.extensionList}" var="extension"
					itemLabel="#{extension.value}"
					itemValue="#{extension.codelistInternalValue}" />

				<p:ajax
					update="level lProtocol protocol drug lDrug product lProduct"
					event="change" listener="#{createController.changeLevel}" />
			</p:selectOneMenu>

			<p:outputLabel value="* Name" styleClass="label-right" />
			<p:inputText required="#{!createController.readOnlyState}"
				requiredMessage="The name is required"
				disabled="#{createController.readOnlyState}" maxlength="200"
				value="#{createController.detailsFormModel.name}"
				style="width: 300px !important" />

			<p:outputLabel id="lDrug"
				value="#{createController.detailsFormModel.drugProgramRequired ? '* Drug Program' : 'Drug Program'}"
				styleClass="label-right" />
			<p:selectOneMenu
				value="#{createController.detailsFormModel.drugProgram}" id="drug"
				disabled="#{createController.readOnlyState}"
				required="#{createController.detailsFormModel.drugProgramRequired and not createController.readOnlyState}"
				requiredMessage="The Drug Program is required">
				<f:selectItem itemValue="" itemLabel="" />
				<f:selectItems value="#{configMB.programList}" var="program"
					itemLabel="#{program.value}"
					itemValue="#{program.codelistInternalValue}" />
			</p:selectOneMenu>

			<p:outputLabel id="lProtocol"
				value="#{createController.detailsFormModel.protocolRequired ? '* Protocol' : 'Protocol'}"
				styleClass="label-right" />
			<p:selectOneMenu
				value="#{createController.detailsFormModel.protocol}" id="protocol"
				disabled="#{createController.readOnlyState}"
				required="#{createController.detailsFormModel.protocolRequired and not createController.readOnlyState}">
				requiredMessage="The Protocol is required"
				<f:selectItem itemValue="" itemLabel="" />
				<f:selectItems value="#{configMB.protocolList}" var="protocol"
					itemLabel="#{protocol.value}"
					itemValue="#{protocol.codelistInternalValue}" />
			</p:selectOneMenu>

			<p:outputLabel id="lProduct"
				value="#{createController.detailsFormModel.productRequired ? '* Product' : 'Product'}"
				rendered="true" styleClass="label-right" />
			<p:selectOneMenu value="#{createController.detailsFormModel.product}"
				disabled="#{createController.readOnlyState}"
				required="#{createController.detailsFormModel.productRequired and not createController.readOnlyState}"
				requiredMessage="The Product is required" id="product">
				<f:selectItem itemValue="" itemLabel="" />
				<f:selectItems value="#{configMB.productList}" var="product"
					itemLabel="#{product.value}"
					itemValue="#{product.codelistInternalValue}" />
			</p:selectOneMenu>

			<p:outputLabel value="* Designee" styleClass="label-right" />
			<p:selectOneMenu
				value="#{createController.detailsFormModel.designee}"
				disabled="#{createController.readOnlyState}" rendered="true"
				requiredMessage="The Designee is required"
				required="#{!createController.readOnlyState}">
				<f:selectItem itemLabel="" itemValue=""></f:selectItem>
				<f:selectItem itemLabel="NONE" itemValue="NONE"></f:selectItem>
				<!-- <f:selectItems></f:selectItems> -->
			</p:selectOneMenu>
		</h:panelGrid>

		<h:panelGrid columns="2" columnClasses="label, value">

			<p:outputLabel value="* Level" styleClass="label-right" />
			<p:selectOneMenu value="#{createController.detailsFormModel.level}"
				rendered="true" required="#{!createController.readOnlyState}"
				requiredMessage="The level is required"
				disabled="#{createController.readOnlyState}" id="level">
				<f:selectItem itemValue="1" itemLabel="1" />
				<f:selectItem itemValue="2" itemLabel="2" />
				<f:selectItem itemValue="3" itemLabel="3" />
				<f:selectItem itemValue="4" itemLabel="4" />
				<f:selectItem itemValue="5" itemLabel="5" />
			</p:selectOneMenu>

			<p:outputLabel value="* Algorithm" styleClass="label-right" />
			<p:inputText value="#{createController.detailsFormModel.algorithm}"
				disabled="#{true or createController.readOnlyState}" />

			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="* Status" />
			</h:panelGrid>
			<h:panelGrid columns="1">
				<h:outputText value="#{createController.detailsFormModel.status}"
					style="height: 30px !important" styleClass="uppercase"></h:outputText>
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="* State" />
			</h:panelGrid>
			<h:panelGrid columns="1">
				<h:outputText value="#{createController.detailsFormModel.state}"
					styleClass="uppercase"></h:outputText>
			</h:panelGrid>


			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Group" />
			</h:panelGrid>
			<h:panelGrid columns="1">
				<h:outputText value="#{createController.detailsFormModel.group}" />
			</h:panelGrid>


			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Code" />
			</h:panelGrid>
			<h:panelGrid columns="1">
				<h:outputText id="codeValue"
					value="#{createController.selectedData.cmqCode}" />
			</h:panelGrid>
		</h:panelGrid>

		<h:panelGrid columns="2" columnClasses="label, value">
			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Creation Date  " />
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
				<h:outputText value="#{createController.selectedData.creationDate}">
					<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" />
				</h:outputText>
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Created By  " />
			</h:panelGrid>

			<h:panelGrid columns="1">
				<h:outputText value="#{createController.selectedData.createdBy}" />
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Last Activation Date  " />
			</h:panelGrid>

			<h:panelGrid columns="1">
				<h:outputText
					value="#{createController.selectedData.activationDate}" />
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
				<p:outputLabel value="Last Activation By  " />
			</h:panelGrid>

			<h:panelGrid columns="1">
				<h:outputText value="#{createController.selectedData.activatedBy}" />
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
			</h:panelGrid>

			<h:panelGrid columns="1" styleClass="grid-right">
			</h:panelGrid>
		</h:panelGrid>
	</h:panelGrid>

	<p:confirmDialog widgetVar="confirmSaveDetailsDlg" showEffect="fade"
		hideEffect="fade" header="Confirm about Unsaved Changes"
		message="There are some unsaved changes. Do you want to save them before you continue?">
		<p:commandButton value="Yes" type="button"
			styleClass="ui-confirmdialog-yes" icon="ui-icon-check"
			onclick="saveDetailsAndGoToNextStep()" />
		<p:commandButton value="No" type="button"
			styleClass="ui-confirmdialog-no" icon="ui-icon-close"
			onclick="resetDetailsAndGoToNextStep()" />
	</p:confirmDialog>

</ui:composition>