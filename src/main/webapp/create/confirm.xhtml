<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


	<p:panel header="Details" id="confirmPan">
		<h:panelGrid columns="4" cellpadding="30">

			<h:panelGrid columns="2" columnClasses="label-cell, value-cell">
				<p:outputLabel styleClass="label-right" value="Extension:" />
				<h:panelGroup>
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'PRO'}"
						value="Protocol" />
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'CPT'}"
						value="Critical Preferred Terms" />
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'DME'}"
						value="Designated Medical Events" />
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'TME'}"
						value="Targeted Medical Events" />
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'TR1'}"
						value="Events of Special Clinical Interest" />
					<h:outputText rendered="#{createController.selectedData.cmqTypeCd eq 'TIER1'}"
						value="Events of Clinical Interest" />
				</h:panelGroup>

				<p:outputLabel styleClass="label-right" value="Name:" />
				<h:outputText value="#{createController.selectedData.cmqName}" />

				<p:outputLabel styleClass="label-right" value="Drug Program:" />
				<h:outputText value="#{RefCodeListService.findCodeByInternalCode('PROGRAM', createController.selectedData.cmqProgramCd)}" />

				<p:outputLabel styleClass="label-right" value="Protocol:" />
				<h:outputText value="#{RefCodeListService.findCodeByInternalCode('PROTOCOL', createController.selectedData.cmqProtocolCd)}" />

				<p:outputLabel styleClass="label-right" value="Product:" />
				<h:outputText value="#{RefCodeListService.findCodeByInternalCode('PRODUCT', createController.selectedData.cmqProductCd)}" />
			</h:panelGrid>

			<h:panelGrid columns="2" columnClasses="label-cell, value-cell" style="min-width: 300px;">
				<p:outputLabel styleClass="label-right" value="Level:" />
				<h:outputText value="#{createController.selectedData.cmqLevel}" />

				<p:outputLabel styleClass="label-right" value="Code:" />
				<h:outputText value="#{createController.selectedData.cmqCode}" />

				<p:outputLabel styleClass="label-right" value="Algorithm:" />
				<h:outputText value="#{createController.selectedData.cmqAlgorithm}" />

				<p:spacer />
				<p:spacer />

				<p:spacer />
				<p:spacer />
			</h:panelGrid>

			<h:panelGrid columns="2" columnClasses="label-cell, value-cell" style="min-width: 300px;">

				<p:outputLabel styleClass="label-right" value="Status:" />
				<h:panelGroup>
					<h:outputText
						rendered="#{createController.selectedData.cmqStatus eq 'P'}"
						value="Pending" />
					<h:outputText
						rendered="#{createController.selectedData.cmqStatus eq 'I'}"
						value="Inactive" />
					<h:outputText
						rendered="#{createController.selectedData.cmqStatus eq 'A'}"
						value="Active" />
				</h:panelGroup>

				<p:outputLabel styleClass="label-right" value="State:" />
				<h:outputText value="#{createController.selectedData.cmqState}" />

				<p:outputLabel styleClass="label-right" value="Group:" />
				<h:outputText value="#{createController.selectedData.cmqGroup}" />

				<p:outputLabel styleClass="label-right" value="Designee:" />
				<h:outputText value="#{createController.selectedData.cmqDesignee}" />

				<p:spacer />
				<p:spacer />
			</h:panelGrid>


			<h:panelGrid columns="2" columnClasses="label-cell, value-cell" style="min-width: 300px;">

				<p:outputLabel styleClass="label-right" value="Creation Date: " />
				<h:outputText value="#{createController.selectedData.creationDate}">
					<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"/>
				</h:outputText>

				<p:outputLabel styleClass="label-right" value="Created By: " />
				<h:outputText value="#{createController.selectedData.createdBy}" />

				<p:outputLabel styleClass="label-right"
					value="Last Activation Date: " />
				<h:outputText
					value="#{createController.selectedData.activationDate}" />

				<p:outputLabel styleClass="label-right" value="Last Activation By: " />
				<h:outputText value="#{createController.selectedData.activatedBy}" />

				<p:spacer />
				<p:spacer />
			</h:panelGrid>
		</h:panelGrid>

	</p:panel>
	<p:spacer height="10"></p:spacer>

	<p:panel header="Informative Notes">
		<h:panelGrid columns="1" cellpadding="30" style="width: 100%">
			<h:panelGrid columns="2" columnClasses="label-cell ui-grid-col-1, value-cell ui-grid-col-11 bordered ui-text-wrap" style="width: 100%">
				<p:outputLabel styleClass="label-right" value="Description:" />
				<h:outputText value="#{createController.selectedData.cmqDescription}" />
		
				<p:outputLabel styleClass="label-right" value="Source:" />
				<h:outputText value="#{createController.selectedData.cmqSource}" />
								
				<p:outputLabel styleClass="label-right" value="Notes:" />
				<h:outputText value="#{createController.selectedData.cmqNote}" />
			</h:panelGrid>
		</h:panelGrid>
	</p:panel>
	
	<p:spacer height="10"></p:spacer>

	<p:panel>
		<p:toolbar>
			<f:facet name="left">
				<p:outputLabel value="Workflow" />
			</f:facet>
			
			<f:facet name="right">
				<p:commandButton value="Reactivate" id="reactivateBtn"
					disabled="#{createController.reactivate}"
					action="#{createController.workflowState('Reactivate')}"
					process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval dueDate">
					<p:confirm header="Confirm Reactivate"
						message="Are you sure you want to reactivate this MedDRA Query?"
						icon="ui-icon-alert" />
				</p:commandButton>
				<p:commandButton value="Retire"
					disabled="#{createController.retire}" id="retireBtn"
					action="#{createController.workflowState('Retire')}"
					process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval dueDate">
					<p:confirm header="Confirm Retire"
						message="Are you sure you want to retire this MedDRA Query?"
						icon="ui-icon-alert" />
				</p:commandButton>

				<p:commandButton value="Demote to Draft" id="demoteBtn"
					disabled="#{createController.selectedData.cmqState eq 'Reviewed' ||  createController.selectedData.cmqState eq 'Approved' ? false : true}"
					action="#{createController.workflowState('Draft')}" process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval dueDate">
					<p:confirm header="Confirm Demote to Draft"
						message="Are you sure you want to demote this MedDRA Query to draft?"
						icon="ui-icon-alert" />
				</p:commandButton>

				<p:commandButton value="Reviewed" id="reviewedBtn"
					disabled="#{createController.reviewed}"
					action="#{createController.workflowState('Reviewed')}"
					process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval dueDate">
					<p:confirm header="Confirm Review"
						message="Are you sure you want to confirm this MedDRA Query as reviewed?"
						icon="ui-icon-alert" />
				</p:commandButton>

				<p:commandButton value="Approve" id="approveBtn"
					disabled="#{createController.selectedData.cmqState eq 'Reviewed' ? false : true}"
					action="#{createController.workflowState('Approved')}"
					process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval dueDate">
					<p:confirm header="Confirm Approve"
						message="Are you sure you want to approve this MedDRA Query?"
						icon="ui-icon-alert" />
				</p:commandButton>

				<p:commandButton value="Delete" id="deleteBtn"
					disabled="#{createController.delete}"
					action="#{createController.workflowState('Delete')}"
					process="@this"
					update="m1 @form:confirmPan retireBtn reviewedBtn demoteBtn approveBtn deleteBtn reactivateBtn reason_approval @form dueDate">
					<p:confirm header="Confirm Delete"
						message="Are you sure you want to delete this MedDRA Query?"
						icon="ui-icon-alert" />
				</p:commandButton>

			</f:facet>
		</p:toolbar>
		<table>
			<tbody>
				<tr>
					<td class="label-cell"><p:outputLabel styleClass="label-right" value="Reason for Request:" /></td>
					<td class="value-cell"><p:inputText value="#{createController.workflowFormModel.requestReason}" /></td>
				</tr>
				<tr>
					<td class="label-cell"><p:outputLabel styleClass="label-right" value="Due Date:" /></td>
					<td class="value-cell">
						<p:calendar value="#{createController.workflowFormModel.dueDate}" id="dueDate" mode="popup" pattern="dd-MMM-yyyy" >
							<p:ajax event="dateSelect" listener="#{createController.workflowFormModel.onDueDateSelect}" />
						</p:calendar>
					</td>
				</tr>
				<tr>
					<td class="label-cell"><p:outputLabel styleClass="label-right" value="Reason for Approval:" /></td>
					<td class="value-cell"><p:inputText value="#{createController.workflowFormModel.approvalReason}" id="reason_approval"
							disabled="#{createController.selectedData.cmqState ne 'Reviewed'}" /></td>
				</tr>
			</tbody>
		</table>

		<!-- <p:spacer height="5" />
		<p:commandButton value="Save" icon="ui-icon-disk"
			action="#{createController.save}" process="@this"></p:commandButton> -->
		<p:spacer height="5" />
	</p:panel>
	<style>
		td.label-cell, td.value-cell {
			vertical-align: top;
		}
		
		td.label-cell label {
			line-height: 1.4;
			font-weight: 600;
			
		}
		td.value-cell {
			line-height: 1.4;
		}
		td .bordered {
			display: block;
			padding: 10px;
			border: solid 1px #bbb;
			margin-bottom: 10px;
		}
		.ui-text-wrap {
	  		white-space: pre-wrap;      /* CSS3 */   
			white-space: -moz-pre-wrap; /* Firefox */    
			white-space: -pre-wrap;     /* Opera lt 7 */   
			white-space: -o-pre-wrap;   /* Opera 7 */    
			word-wrap: break-word;      /* IE */
			overflow-wrap: break-word;
		   	-ms-word-break: break-all;
		   	word-break: break-word;	   
		   	-ms-hyphens: auto;
  		   	-moz-hyphens: auto;
  			-webkit-hyphens: auto;
  			hyphens: auto;
   		}
	</style>

</ui:composition>
