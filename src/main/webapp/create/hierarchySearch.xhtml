<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">


	<p:panel header="Relations" style="width:700px; height:623px;">
		<h:panelGrid columns="6">
			<p:outputLabel value="Level" for="levelH" />
			<p:selectOneMenu id="levelH" label="Level" partialTriggers="soc9"
				value="#{searchController.levelH}">
				<f:selectItem itemValue="PRO" itemLabel="PRO" />
				<f:selectItem itemValue="SMQ1" itemLabel="SMQ1" />
				<f:selectItem itemValue="SMQ2" itemLabel="SMQ2" />
				<f:selectItem itemValue="SMQ3" itemLabel="SMQ3" />
				<f:selectItem itemValue="SMQ4" itemLabel="SMQ4" />
				<f:selectItem itemValue="SMQ5" itemLabel="SMQ5" />
				<f:selectItem itemValue="SOC" itemLabel="SOC" />
				<f:selectItem itemValue="HLGT" itemLabel="HLGT" />
				<f:selectItem itemValue="HLT" itemLabel="HLT" />
				<f:selectItem itemValue="PT" itemLabel="PT" />
				<f:selectItem itemValue="LLT" itemLabel="LLT" />
			</p:selectOneMenu>
			<p:spacer width="10" />
			<p:outputLabel value="Term" for="termH" />
			<p:inputText id="termH" style="text-transform:uppercase"
				value="#{searchController.termName}" />
			<p:commandButton value="Search" update="resultHier"
				action="#{searchController.hierarchySearch}" />
		</h:panelGrid>




		<br />
		<h:panelGrid id="pc3" styleClass="AFStretchWidth">
			<p:toolbar id="t4">
				<f:facet name="left">
					<p:commandButton id="filterH" value="Filter and Sort" type="button"
						icon="ui-icon-triangle-1-s" />
					<p:overlayPanel id="filterPanelH" for="filterH"
						showCloseIcon="true">
						<h:panelGrid columns="2">
							<p:outputLabel value="Sort" />
							<p:selectOneMenu value="TERM">
								<f:selectItem itemValue="TERM" itemLabel="Term name"></f:selectItem>
								<f:selectItem itemValue="DEF_LEVEL_REF_SHORT_NAME"
									itemLabel="Level"></f:selectItem>
								<f:selectItem itemValue="SCOPE" itemLabel="Scope"></f:selectItem>
							</p:selectOneMenu>

							<p:outputLabel for="showH" value="Show Primary Only"
								style="min-width: 100px !important" />
							<p:selectBooleanCheckbox value="false" id="showH"
								label="Show Primary Only"></p:selectBooleanCheckbox>

							<p:outputLabel value="Scope" />
							<p:selectOneMenu value="0">
								<f:selectItem itemValue="0" itemLabel="Full /SMQ"></f:selectItem>
								<f:selectItem itemValue="3" itemLabel="Child Narrow"></f:selectItem>
							</p:selectOneMenu>

							<p:spacer />
							<p:commandButton value="Refresh" id="cbH" icon="fa fa-refresh"
								rendered="true" />
						</h:panelGrid>
					</p:overlayPanel>
					<p:spacer width="5" />
 

				</f:facet>
			</p:toolbar>

			<p:treeTable value="#{searchController.hierarchyRoot}" var="node"
				id="resultHier" rows="20" selectionMode="checkbox" selection="#{searchController.relationSelected}" 
				paginator="true" paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,25,30">

				<p:ajax event="expand" listener="#{searchController.onNodeExpand}"
					update="resultHier" />

				<p:column headerText="Level">
					<h:outputText value="#{node.level}" />
				</p:column>

				<p:column headerText="Term">
					<h:outputText value="#{node.term}" />
				</p:column>

				<p:column headerText="Code" sortBy="#{node.code}"
					filterBy="#{node.code}">
					<h:outputText value="#{node.code}" />
				</p:column>
			</p:treeTable>
		</h:panelGrid>
	</p:panel>

	<!-- <p:ajaxStatus onstart="PF('statusDialog').show()"
		onsuccess="PF('statusDialog').hide()" />

	<p:dialog style="background: none !important; border: none !important" widgetVar="statusDialog" modal="false" draggable="false"
		closable="false" resizable="false" showHeader="false">
		<img src="ajax-loader.gif" />
	</p:dialog> 	 -->

	<style>
#termH {
	text-transform: uppercase;
}
</style>

</ui:composition>