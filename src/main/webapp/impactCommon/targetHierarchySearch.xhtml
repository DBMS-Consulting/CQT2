<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">


	<p:panel header="Relations" style="min-height: 450px;height: 90%;height: calc(100% - 40px);position: relative;">
		<h:panelGrid columns="7">
			<p:outputLabel value="Level" for="levelHT" />
			<p:selectOneMenu id="levelHT" label="Level" appendTo="@this"
                             value="#{impactSearchController.targetHierarchySearchDlgModel.filterLevel}">
				<f:selectItem itemValue="PRO" itemLabel="PRO" />
				<f:selectItem itemValue="SMQ1" itemLabel="SMQ1" />
				<f:selectItem itemValue="SMQ2" itemLabel="SMQ2" />
				<f:selectItem itemValue="SMQ3" itemLabel="SMQ3" />
				<f:selectItem itemValue="SMQ4" itemLabel="SMQ4" />
				<f:selectItem itemValue="SMQ5" itemLabel="SMQ5" />
				<f:selectItem itemValue="SOC" itemLabel="SOC" />
				<f:selectItem itemValue="HLGT" itemLabel="HLGT" />
				<f:selectItem itemValue="HLT" itemLabel="HLT" />
				<f:selectItem itemValue="PT" itemLabel="PT" />
				<f:selectItem itemValue="LLT" itemLabel="LLT" />
				<f:selectItem itemValue="NC-LLT" itemLabel="Non Current LLT" />
				<p:ajax update="checkTarget" />
			</p:selectOneMenu>
			<p:spacer width="5" />
			<p:outputLabel value="Term" for="termHT" />
			<p:inputText id="termHT" style="text-transform:uppercase"
				onkeypress="if (event.keyCode == 13) { return false; }"
                value="#{impactSearchController.targetHierarchySearchDlgModel.filterTermName}" />
			<p:commandButton value="Search" update="resultHierTarget"
				action="#{impactSearchController.targetHierarchySearchDlgModel.hierarchySearch}" />
				
			<h:panelGrid columns="2">
				
				<h:selectBooleanCheckbox id="checkTarget" disabled="#{impactSearchController.targetHierarchySearchDlgModel.filterLevel != 'PT' and impactSearchController.targetHierarchySearchDlgModel.filterLevel != 'LLT'}" value="#{impactSearchController.targetHierarchySearchDlgModel.showPrimaryPath}">
		           		<p:ajax update="resultHierTarget" listener="#{impactSearchController.targetHierarchySearchDlgModel.collapseForPrimaryPathShowing}"  />
		        	</h:selectBooleanCheckbox>
		        <h:outputText style="font-weight: bold" value="Show Primary path" />
		 	</h:panelGrid>
		</h:panelGrid>
		

		<br />
		<h:panelGroup id="pct3" style="display:block;position: absolute;height:80%;height: calc(100% - 100px);width: 100%;margin-left: -16px;padding: 0 10px;box-sizing: border-box;overflow: auto;">
			<p:treeTable value="#{impactSearchController.targetHierarchySearchDlgModel.hierarchyRoot}"  var="node"
                id="resultHierTarget" selectionMode="checkbox" selection="#{impactSearchController.targetHierarchySearchDlgModel.selectedNodes}"
				styleClass="ui-treetable-resultHierTarget hide-sel-chkbox"
                rowStyleClass="#{node.rowStyleClass}" resizableColumns="true">

				<p:ajax event="expand"
					listener="#{impactSearchController.targetHierarchySearchDlgModel.onNodeExpand}"
					update="resultHierTarget" />

				<p:column headerText="Level">
					<h:outputText value="#{node.level}" />
				</p:column>

				<p:column headerText="Term">
					<h:outputText value="#{node.term}" />
				</p:column>

				<p:column headerText="Code" sortBy="#{node.code}"
					filterBy="#{node.code}">
					<h:outputText value="#{node.code}" />
					<h:outputText value="#{node.entity.id}"
						styleClass="ui-hidden data-entity-id" />
				</p:column>

			</p:treeTable>
		</h:panelGroup>
	</p:panel>

	<style>
#termHT {
	text-transform: uppercase;
}

.ui-treetable.ui-treetable-resultHierTarget .ui-treetable-selectable-node .ui-chkbox.ui-selection
	{
	display: none;
}

.ui-hidden {
	display: none;
}

.green-colored {
	color: #00c119;
}

.green-colored:HOVER {
	color: #009912;
}
</style>

</ui:composition>