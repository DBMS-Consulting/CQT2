<?xml version='1.0' encoding='UTF-8'?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
 
	<p:tabView id="pt2" style="width: 100% !important; min-height:381px; height:100%">

		<p:tab title="Impacted SMQs" id="sdi5">
			<p:dataTable id="impactedSmqList" styleClass="ui-datatable-impactedSmqList" widgetVar="impactedSmqList"
					value="#{impactSearchController.impactedSmqBaseLazyDataModel}" var="smqList" paginator="true" rows="10"
                	selection="#{impactSearchController.selectedImpactedSmqList}" selectionMode="single" lazy="true" resizeMode="expand"
                	paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rowsPerPageTemplate="5,10,15,20" resizableColumns="true"
                    filterDelay="500" style="height:100%">
				
				<p:ajax event="rowSelect" listener="#{impactSearchController.onRowSelect}" />
				
				<p:column filterFunction="PF('statusDialog').hide()" headerText="SMQ Name" id="c52" styleClass="ia-search-term-col wrap"
					 filterBy="#{smqList.smqName}" filterMatchMode="contains" >
					<h:outputText value="#{smqList.smqName}" id="ot54" />
				</p:column>
				<p:column sortable="false" headerText="Level" id="c51" width="40" styleClass="text-center"
					filterable="true" filterBy="#{smqList.smqLevel}" filterMatchMode="exact">
					<f:facet name="filter">
		                <p:selectOneMenu onchange="PF('impactedSmqList').filter()" style="width: 50%;" autoWidth="false">
		                    <f:selectItem itemLabel="All" itemValue="#{null}" noSelectionOption="true" />
		                    <f:selectItem itemLabel="1" itemValue="1" />
		                    <f:selectItem itemLabel="2" itemValue="2" />
		                    <f:selectItem itemLabel="3" itemValue="3" />
		                    <f:selectItem itemLabel="4" itemValue="4" />
		                    <f:selectItem itemLabel="5" itemValue="5" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{smqList.smqLevel}" id="ot53" />
				</p:column>
				<p:column sortable="false" headerText="Code" width="70" id="c53"
                          filterMatchMode="contains" filterFunction="#{impactSearchController.filterByCode}"
                          filterable="true" filterBy="#{smqList.smqCode}">
					<h:outputText value="#{smqList.smqCode}" id="ot55" />
				</p:column>
				<p:column sortable="false" headerText="Status" width="40" id="c54">
					<h:outputText value="#{smqList.smqStatus}" id="ot56" />
				</p:column>
				<p:column sortable="false" headerText="State" width="80" id="c55">
					<h:outputText value="" id="ot57" />
				</p:column>

			</p:dataTable>
		</p:tab>
		<p:tab title="Non-Impacted SMQs" id="sdi4">
			<p:dataTable id="notImpactedSmqList" value="#{impactSearchController.notImpactedSmqBaseLazyDataModel}"
				widgetVar="notImpactedSmqList" var="smqList" paginator="true" rows="10" resizeMode="expand"
                selection="#{impactSearchController.selectedNotImpactedSmqList}" selectionMode="single" lazy="true"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="5,10,15,20" resizableColumns="true"
                filterDelay="500" style="height:100%">
                
                <p:ajax event="rowSelect" listener="#{impactSearchController.onRowSelect}" />
                
				<p:column headerText="SMQ Name" id="c52" styleClass="ia-search-term-col wrap"
					filterable="true" filterBy="#{smqList.smqName}" filterMatchMode="contains">
					<h:outputText value="#{smqList.smqName}" id="ot54" />
				</p:column>
				<p:column sortable="false" headerText="Level" id="c51" width="40" styleClass="text-center"
					filterable="true" filterBy="${smqList.smqLevel}" filterMatchMode="contains">
					<f:facet name="filter">
		                <p:selectOneMenu onchange="PF('notImpactedSmqList').filter()" style="width: 50%;" autoWidth="false">
		                    <f:selectItem itemLabel="All" itemValue="#{null}" noSelectionOption="true" />
		                    <f:selectItem itemLabel="1" itemValue="1" />
		                    <f:selectItem itemLabel="2" itemValue="2" />
		                    <f:selectItem itemLabel="3" itemValue="3" />
		                    <f:selectItem itemLabel="4" itemValue="4" />
		                    <f:selectItem itemLabel="5" itemValue="5" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{smqList.smqLevel}" id="ot53" />
				</p:column>
				<p:column  headerText="Code" width="70" id="c53" sortable="false"
                          filterMatchMode="contains" filterable="true"
                          filterFunction="#{impactSearchController.filterByCode}" filterBy="#{smqList.smqCode}">
					<h:outputText value="#{smqList.smqCode}"  id="ot55" />
				</p:column>
				<p:column sortable="false" headerText="Status" width="40" id="c54">
					<h:outputText value="#{smqList.smqStatus}" id="ot56" />
				</p:column>
				<p:column sortable="false" headerText="State" width="80" id="c55">
					<h:outputText value="" id="ot57" />
				</p:column>
				<p:column sortable="false" rendered="false" headerText="ID"
					width="50" id="c57">
					<h:outputText value="#{smqList.smqId}" id="ot59">

					</h:outputText>
				</p:column>
			</p:dataTable>
		</p:tab>
		<p:tab title="Impacted Lists" id="sdi2">
			<p:dataTable id="impactedCmqList" styleClass="ui-datatable-impactedCmqList" 
					value="#{impactSearchController.impactedCmqBaseLazyDataModel}" resizeMode="expand"
					widgetVar="impactedCmqList" var="cmqList" paginator="true" rows="10" 
                	selection="#{impactSearchController.selectedImpactedCmqList}" selectionMode="single" lazy="true"
                	paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                	rowsPerPageTemplate="5,10,15,20" resizableColumns="true"
                    filterDelay="500" style="height:100%; width: 100% !important ">
                
                <p:ajax event="rowSelect" listener="#{impactSearchController.onRowSelect}" />
                	
				<p:column sortable="false" headerText="List Name" id="c52" styleClass="ia-search-term-col wrap"
					filterable="true" filterBy="#{cmqList.cmqName}" filterMatchMode="contains">
					<h:outputText value="#{cmqList.cmqName}" id="ot54" />
				</p:column>
				<p:column sortable="false" headerText="Extension" id="c50" width="70"
					filterable="true" filterBy="#{cmqList.cmqTypeCd}" filterMatchMode="exact">
					<f:facet name="filter">
		                <p:selectOneMenu onchange="PF('impactedCmqList').filter()" style="width: 70%;" autoWidth="false">
		                    <f:selectItem itemLabel="" itemValue="#{null}" noSelectionOption="true"  />
		                    <f:selectItems value="#{configMB.extensionList}" var="extension"
								itemLabel="#{extension.value}"
								itemValue="#{extension.codelistInternalValue}" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{cmqList.cmqTypeCd}" id="ot52" />
				</p:column>
				<p:column sortable="false" headerText="Level" id="c51" width="30" styleClass="text-center">
					<h:outputText value="#{cmqList.cmqLevel}" id="ot53" />
				</p:column>
				<p:column sortable="false" headerText="Code" width="70" id="c53"
                          filterFunction="#{impactSearchController.filterByCode}" filterMatchMode="contains"
                          filterable="true" filterBy="#{cmqList.cmqCode}">
					<h:outputText value="#{cmqList.cmqCode}" id="ot55" />
				</p:column>
				<p:column sortable="false" headerText="Status" width="40" id="c54">
					<h:outputText value="#{cmqList.cmqStatus}" id="ot56" />
				</p:column>
				<p:column sortable="false" headerText="State" width="80" id="c55"
                          filterable="true" filterBy="#{cmqList.cmqState}" filterMatchMode="exact">
                    <f:facet name="filter">
		                <p:selectOneMenu onchange="PF('impactedCmqList').filter()" style="width: 70%;" autoWidth="false">
		                    <f:selectItem itemLabel="" itemValue="#{null}" noSelectionOption="true"  />
                            <f:selectItems value="#{configMB.cmqTargetListStates}" var="s"
								itemLabel="#{s[1]}" itemValue="#{s[0]}" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{cmqList.cmqState}" id="ot57" />
					<h:outputText value="#{cmqList.cmqId}" styleClass="ui-hidden data-entity-id" />
					<h:outputText value="impacted-cmq-list" styleClass="ui-hidden data-entity-type" />
				</p:column>
				<p:column sortable="false" filterable="true"  headerText="Designee" width="150" id="dg" 
					filterMatchMode="contains" filterBy="#{cmqList.cmqDesignee}">
					<f:facet name="filter">
						<p:selectOneMenu onchange="PF('impactedCmqList').filter()" style="width: 70%;" autoWidth="false"
			                label="Designee">
							<f:selectItem itemValue="" itemLabel="" noSelectionOption="true" />
			                <f:selectItems value="#{createController.detailsFormModel.designeeList}" var="d"
			                               itemLabel="#{d.fullName}" itemValue="#{d.userName}"/>
						</p:selectOneMenu>
					</f:facet>
				 	<h:outputText value="#{impactSearchController.formatDesignee(cmqList.cmqDesignee, cmqList.cmqDesignee2, cmqList.cmqDesignee3)}" />
  				</p:column>
			</p:dataTable>
		</p:tab>
		<p:tab title="Non-Impacted Lists" id="sdi6">
			<p:dataTable id="notImpactedCmqList" value="#{impactSearchController.notImpactedCmqBaseLazyDataModel}"
				widgetVar="notImpactedCmqList" var="cmqList" paginator="true" rows="10" resizeMode="expand"
                selection="#{impactSearchController.selectedNotImpactedCmqList}" selectionMode="single" lazy="true"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="5,10,15,20" resizableColumns="true"
                filterDelay="500" style="height:100%">
                
                <p:ajax event="rowSelect" listener="#{impactSearchController.onRowSelect}" />
                
				<p:column sortable="false" headerText="List Name" id="c52" styleClass="ia-search-term-col wrap"
					filterable="true" filterBy="#{cmqList.cmqName}" filterMatchMode="contains">
					<h:outputText value="#{cmqList.cmqName}" id="ot54" />
				</p:column>
				<p:column sortable="false" headerText="Extension" id="c50" width="70"
					filterable="true" filterBy="#{cmqList.cmqTypeCd}" filterMatchMode="exact">
					<f:facet name="filter">
		                <p:selectOneMenu onchange="PF('notImpactedCmqList').filter()" style="width: 70%;" autoWidth="false">
		                    <f:selectItem itemLabel="" itemValue="#{null}" noSelectionOption="true"  />
		                    <f:selectItems value="#{configMB.extensionList}" var="extension"
								itemLabel="#{extension.value}" itemValue="#{extension.codelistInternalValue}" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{cmqList.cmqTypeCd}" id="ot52" />
				</p:column>
				<p:column sortable="false" headerText="Level" id="c51" width="30" styleClass="text-center">
					<h:outputText value="#{cmqList.cmqLevel}" id="ot53" />
				</p:column>
				<p:column sortable="false" headerText="Code" width="70" id="c53"
                          filterFunction="#{impactSearchController.filterByCode}" filterMatchMode="contains"
                          filterable="true" filterBy="#{cmqList.cmqCode}">
					<h:outputText value="#{cmqList.cmqCode}"  id="ot55" />
				</p:column>
				<p:column sortable="false" headerText="Status" width="40" id="c54">
					<h:outputText value="#{cmqList.cmqStatus}" id="ot56" />
				</p:column>
				<p:column sortable="false" headerText="State" width="80" id="c55"
                          filterable="true" filterBy="#{cmqList.cmqState}" filterMatchMode="exact">
                    <f:facet name="filter">
		                <p:selectOneMenu onchange="PF('notImpactedCmqList').filter()" style="width: 70%;" autoWidth="false">
		                    <f:selectItem itemLabel="" itemValue="#{null}" noSelectionOption="true"  />
                            <f:selectItems value="#{configMB.cmqTargetListStates}" var="s"
								itemLabel="#{s[1]}" itemValue="#{s[0]}" />
                            <f:selectItem itemLabel="PUBLISHED" itemValue="PUBLISHED" />
		                </p:selectOneMenu>
		            </f:facet>
					<h:outputText value="#{cmqList.cmqState}" id="ot57" />
				</p:column>
				<p:column sortable="false" rendered="false" headerText="ID"
					width="50" id="c57">
					<h:outputText value="####" id="ot59"/>
				</p:column>
				
				<p:column sortable="false" filterable="true"  headerText="Designee" width="150" id="dgi" 
					filterMatchMode="contains" filterBy="#{cmqList.cmqDesignee}">
					<f:facet name="filter">
						<p:selectOneMenu onchange="PF('notImpactedCmqList').filter()" style="width: 70%;" autoWidth="false"
			                label="Designee">
							<f:selectItem itemValue="" itemLabel="" noSelectionOption="true" />
			                <f:selectItems value="#{createController.detailsFormModel.designeeList}" var="d"
			                               itemLabel="#{d.fullName}" itemValue="#{d.userName}"/>
						</p:selectOneMenu>
					</f:facet>
				 	<h:outputText value="#{impactSearchController.formatDesignee(cmqList.cmqDesignee, cmqList.cmqDesignee2, cmqList.cmqDesignee3)}" />
  				</p:column>
			</p:dataTable>
		</p:tab>
	</p:tabView>
	
	<p:ajaxStatus onstart="PF('statusDialog').hide()"
		onsuccess="PF('statusDialog').hide()" />

	

</ui:composition>